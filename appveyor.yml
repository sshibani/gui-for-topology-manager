version: 0.0.1.{build}-alpha
environment:
  nodejs_version: "6.3.0"
pull_requests:
  do_not_increment_build_number: true
branches:
  only:
  - feature/CI
configuration: Release
assembly_info:
  patch: true
  file: '**\AssemblyInfo.*'
  assembly_version: '{version}'
  assembly_file_version: '{version}'
  assembly_informational_version: '{version}'
install:
 - ps: Install-Product node $Env:nodejs_version
 - choco install msbuild.communitytasks -y
 - npm install -g angular-cli
# scripts to run before build
before_build:
  - cd %APPVEYOR_BUILD_FOLDER%
  - cd client  
  - npm install
  - ng build --prod --output-path=..\build\
  - cd ..\server
  - nuget restore
build:
  project: server\msbuild.build
  verbosity: normal
artifacts:
- path: build/package/**/*.zip
  name: Zip Archive